<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>addon/components/ember-tabular.js - ember-tabular</title>
    <link rel="stylesheet" href="">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/css/custom.css">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
</head>
<body class="yui3-skin-sam">
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <h1 class="brand" style="padding: 10px 16px 10px; height: 20px; line-height: 20px; margin-left: 0;">
	    <img alt="ember-tabular" src="../assets/css/logo.png" style="max-height: 65%;" title="ember-tabular">
            ember-tabular
        </h1>
	<div class="nav">
            <li class="divider-vertical"></li>
            <li>
                <p class="navbar-text">
                    API Docs for Version: <b>0.1.0.2cc12f9b</b>
                </p>
            </li>
        </div>
        <form class="navbar-form pull-right" style="line-height: 40px; height: 40px;">
            <input style="margin-top: 0;" type="text" class="search-query" placeholder="Search for classes/modules..." data-obj='["classes/EmberTabular", "classes/EmberTabularAlert", "classes/EmberTabularDateFilter", "classes/EmberTabularDropdownFilter", "classes/EmberTabularFilter", "classes/EmberTabularGlobalFilter"]'>
        </form>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="span3">
	    <div>
	        <h3>APIs</h3>
	        <div id="sidebar">
	            <ul id="main-nav" class="nav nav-tabs" style="margin-bottom:0;">
	                <li class="active"><a href="#classes" data-toggle="tab">Classes</a></li>
	                <li><a href="#modules" data-toggle="tab">Modules</a></li>
	            </ul>
	    
	            <div id="api-tabview-filter">
	                <input type="search" placeholder="Type to filter APIs">
	            </div>
	    
	            <div class="tab-content" style="border: 1px solid #DDD; border-top:0;">
	                <div class="tab-pane active" id="classes">
	                    <ul id="api-classes" class="nav nav-list">
	                            <li><a href="../classes/EmberTabular.html">EmberTabular</a></li>
	                            <li><a href="../classes/EmberTabularAlert.html">EmberTabularAlert</a></li>
	                            <li><a href="../classes/EmberTabularDateFilter.html">EmberTabularDateFilter</a></li>
	                            <li><a href="../classes/EmberTabularDropdownFilter.html">EmberTabularDropdownFilter</a></li>
	                            <li><a href="../classes/EmberTabularFilter.html">EmberTabularFilter</a></li>
	                            <li><a href="../classes/EmberTabularGlobalFilter.html">EmberTabularGlobalFilter</a></li>
	                    </ul>
	                </div>
	    
	                <div class="tab-pane" id="modules">
	                    <ul id="api-modules" class="nav nav-list">
	                    </ul>
	                </div>
	            </div>
	        </div>
	    </div>
        </div>
        <div class="span9">
                <form id="options-form" class="form-inline pull-right">
                    Show:
                    <label for="api-show-inherited" class="checkbox">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected" class="checkbox">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private" class="checkbox">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated" class="checkbox">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </form>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<div class="page-header">
    <h1>addon/components/ember-tabular.js <small>File</small></h1>
</div>

<div class="file">
    <pre class="prettyprint linenums">
import Ember from &#x27;ember&#x27;;

/**
* ## Basic Usage
* - &#x60;columns&#x60; - Controller array to setup the table headers/columns (detailed below).
  - &#x60;modelName&#x60; - for the component to make the proper request when filtering/sorting, you must pass the model type matching your Ember model structure. e.g. brand/diagram, product.
  - &#x60;record&#x60; - this is bound to the controller and is used to iterate over the table&#x27;s model data.
* ### Template
  &#x60;&#x60;&#x60;hbs
  {{! app/templates/my-route.hbs }}

  {{#ember-tabular columns=columns modelName=&quot;user&quot; record=users as |section|}}
      {{#if section.isBody}}
          {{#each users as |row|}}
              &lt;tr&gt;
                  &lt;td&gt;{{row.username}}&lt;/td&gt;
                  &lt;td&gt;{{row.emailAddress}}&lt;/td&gt;
                  &lt;td&gt;{{row.firstName}}&lt;/td&gt;
                  &lt;td&gt;{{row.lastName}}&lt;/td&gt;
                  &lt;td&gt;
                      {{#link-to &quot;index&quot; class=&quot;btn btn-xs&quot; role=&quot;button&quot;}}
                          Edit
                      {{/link-to}}
                  &lt;/td&gt;
              &lt;/tr&gt;
          {{/each}}
      {{/if}}
  {{/ember-tabular}}
  &#x60;&#x60;&#x60;
* ### Controller
* Setup the columns array, which is how the table headers are constructed, &#x60;label&#x60; is required in all cases.
  &#x60;&#x60;&#x60;js
  // app/controllers/my-route.js

  export default Ember.Controller.extend({
    users: null,
    columns: [
      {
        property: &#x27;username&#x27;,
        label: &#x27;Username&#x27;,
        defaultSort: &#x27;username&#x27;,
      },
      {
        property: &#x27;emailAddress&#x27;,
        label: &#x27;Email&#x27;,
      },
      {
        property: &#x27;firstName&#x27;,
        label: &#x27;First Name&#x27;,
      },
      {
        property: &#x27;lastName&#x27;,
        label: &#x27;Last Name&#x27;,
      },
      {
        property: &#x27;updatedAt&#x27;,
        label: &#x27;Last Updated&#x27;,
        type: &#x27;date&#x27;,
      },
    ],
  });
  &#x60;&#x60;&#x60;
*
* @class EmberTabular
*/
export default Ember.Component.extend({
  store: Ember.inject.service(&#x27;store&#x27;),
  action: null,
  classNames: [&#x27;ember-tabular&#x27;],
  /**
  * Component will attempt to make a request to fetch the data.
  *
  * @property makeRequest
  * @type Boolean
  * @default true
  */
  makeRequest: true,
  /**
  * Used to toggle the filter row bar.
  *
  * @property showFilterRow
  * @type Boolean
  * @default false
  */
  showFilterRow: false,
  /**
  * @property sortableClass
  * @type String
  * @default &#x27;sortable&#x27;
  */
  sortableClass: &#x27;sortable&#x27;,
  /**
  * @property tableWrapperClass
  * @type String
  * @default &#x27;&#x27;
  */
  tableWrapperClass: &#x27;&#x27;,
  /**
  * @property tableClass
  * @type String
  * @default &#x27;table-bordered table-hover&#x27;
  */
  tableClass: &#x27;table-bordered table-hover&#x27;,
  /**
  * @property paginationWrapperClass
  * @type String
  * @default &#x27;&#x27;
  */
  paginationWrapperClass: &#x27;&#x27;,
  /**
  * Once the &#x60;isRecordLoaded&#x60; is determined if true and no data exists then this is displayed.
  *
  * @property tableLoadedMessage
  * @type String
  * @default &#x27;No Data.&#x27;
  */
  tableLoadedMessage: &#x27;No Data.&#x27;,
  /**
  * Computed Property to determine the column length dependent upon &#x60;columns&#x60;.
  *
  * @property columnLength
  * @param columns {Array}
  * @return {Number}
  */
  columnLength: Ember.computed(&#x27;columns&#x27;, function () {
    return this.get(&#x27;columns&#x27;).length;
  }),

  // Allows multiple yields
  header: {
    isHeader: true,
  },
  body: {
    isBody: true,
  },
  footer: {
    isFooter: true,
  },

  /**
  * Model to be requested using &#x60;makeRequest: true&#x60;.
  *
  * @property modelName
  * @type String
  * @default null
  */
  modelName: null,
  /**
  * This is typically bound to the controller and is used to iterate over the table&#x27;s model data.
  *
  * @property record
  * @type Object
  * @default null
  */
  record: null,
  /**
  * This is typically setup on the controller and passed into the component, and is used to construct the table headers/filtering.
  *
  &#x60;&#x60;&#x60;js
  export default Ember.Controller.extend({
    users: null,
    columns: [
      {
        property: &#x27;username&#x27;,
        label: &#x27;Username&#x27;,
        defaultSort: &#x27;username&#x27;,
      },
      {
        property: &#x27;emailAddress&#x27;,
        label: &#x27;Email&#x27;,
      },
      {
        property: &#x27;firstName&#x27;,
        label: &#x27;First Name&#x27;,
        sort: false,
      },
      {
        property: &#x27;isAdmin&#x27;,
        label: &#x27;Is Admin&#x27;,
        list: [
          {
            label: &#x27;Yes&#x27;,
            value: true,
          },
          {
            label: &#x27;No&#x27;,
            value: false,
          }
        ],
      },
      {
        property: &#x27;updatedAt&#x27;,
        label: &#x27;Last Updated&#x27;,
        type: &#x27;date&#x27;,
      },
      {
        label: &#x27;Actions&#x27;,
      },
    ],
  });
  &#x60;&#x60;&#x60;
  *
  - &#x60;columns.property&#x60; - {String}
    - Required for column filtering/sorting
    - Properties should be in camelCase format
  - &#x60;columns.label&#x60; - {String}
    - Required in all use-cases
  - &#x60;columns.type&#x60; - {String} - Default: text
    - Sets the filter &#x60;&lt;input type=&quot;&quot;&gt;&#x60;
  - &#x60;columns.sort&#x60; - {Boolean} - Default: &#x60;true&#x60;
    - Required for column sorting
  - &#x60;columns.list&#x60; - {Array} - Default: &#x60;null&#x60; - Filtering the column based on a dropdown list.
    - &#x60;list.label&#x60; - Displayed to the user for selection.
    - &#x60;list.value&#x60; - Value that is sent in the request.
  - &#x60;columns.defaultSort&#x60; - {String}
    - Initial sort value for API request
    - Will be overridden with any sorting changes
  *
  * @property columns
  * @type Array
  * @default null
  */
  columns: null,

  // pagination defaults
  /**
  * @property page
  * @type Number
  * @default 1
  */
  page: 1,
  /**
  * Used in request to construct pagination.
  *
  * @property limit
  * @type Number
  * @default 10
  */
  limit: 10,
  /**
  * Number passed to the pagination add-on.
  *
  * @property pageLimit
  * @type Number
  * @default 0
  */
  pageLimit: 0,
  /**
  * Used in request to construct pagination.
  *
  * @property offset
  * @type Number
  * @default 0
  */
  offset: 0,
  /**
  * @property sort
  * @type String
  * @default null
  */
  sort: null,
  /**
  * @property filter
  * @type Object
  * @default null
  */
  filter: null,
  /**
  * Object to pass in static query-params that will not change based on any filter/sort criteria.
  * Additional table-wide filters that need to be applied in all requests. Typically bound to the controller.
  &#x60;&#x60;&#x60;js
  // app/controllers/location.js

  export default Ember.Controller.extend({
    staticParams: Ember.computed(&#x27;model&#x27;, function() {
      return {
        &#x27;filter[is-open]&#x27;: &#x27;1&#x27;,
        include: &#x27;hours&#x27;,
      };
    }),
    ...
  });
  &#x60;&#x60;&#x60;

  &#x60;&#x60;&#x60;hbs
  {{! app/templates/my-route.hbs }}

  {{#ember-tabular columns=columns modelName=&quot;user&quot; record=users staticParams=staticParams as |section|}}
    ...
  {{/ember-tabular}}
  &#x60;&#x60;&#x60;
  *
  * @property staticParams
  * @type Object
  * @default null
  */
  staticParams: null,

  // State flags
  /**
  * @property isSuccess
  * @type Boolean
  * @default false
  */
  isSuccess: false,
  /**
  * @property isFailure
  * @type Boolean
  * @default false
  */
  isFailure: false,
  /**
  * @property isLoading
  * @type Boolean
  * @default false
  */
  isLoading: false,

  /**
  * @property defaultSuccessMessage
  * @type String
  * @default &#x27;Success!&#x27;
  */
  defaultSuccessMessage: &#x27;Success!&#x27;,
  /**
  * @property defaultFailureMessage
  * @type String
  * @default &#x27;There was an issue. Please check below for errors.&#x27;
  */
  defaultFailureMessage: &#x27;There was an issue. Please check below for errors.&#x27;,

  // Messages
  successMessage: Ember.get(Ember.Component, &#x27;defaultSuccessMessage&#x27;),
  failureMessage: Ember.get(Ember.Component, &#x27;defaultFailureMessage&#x27;),

  // For pushing any per field errors
  /**
  * Conforms to json:api spec: http://jsonapi.org/format/#errors
  *
  * @property errors
  * @type Array
  * @default null
  */
  errors: null,

  /**
  * Used to serialize the parameters within &#x60;request&#x60;.
  *
  * @method serialize
  * @param params {Object} An object of query parameters.
  * @return params {Object} The serialized query parameters.
  */
  serialize(params) {
    // Serialize Pagination
    params = this.serializePagination(params);
    // Serialize Filter
    params = this.serializeFilter(params);
    // Serialize Sort
    params = this.serializeSort(params);

    return params;
  },

  /**
  * Transform params related to pagination into API expected format.
  * Follows json:api spec by default: http://jsonapi.org/format/#fetching-pagination.
  *
  * &#x60;offset&#x60; =&gt; &#x60;?page[offset]&#x60;.
  *
  * &#x60;limit&#x60; =&gt; &#x60;?page[limit]&#x60;.
  *
  * If you are not using Ember Data then you can extend this addon&#x27;s component and override a set of serialize and normalized methods:
  &#x60;&#x60;&#x60;js
  import EmberTabular from &#x27;ember-tabular/components/ember-tabular&#x27;;

  export default EmberTabular.extend({
    serializePagination(params) {
      // override default pagination ?page[offset]= and ?[page]limit=
      // offset and limit will be sent as ?offset= and ?limit=
      params.offset = (params.page * params.limit) - params.limit;
      if (isNaN(params.offset)) {
        params.offset = null;
      }

      return params;
    },
  });
  &#x60;&#x60;&#x60;
  *
  * @method serializePagination
  * @param params {Object} An object of query parameters.
  * @return params {Object} The serialized pagination query parameters.
  */
  serializePagination(params) {
    // Override to set dynamic offset based on page and limit
    params.offset = (params.page * params.limit) - params.limit;
    if (isNaN(params.offset)) {
      params.offset = null;
    }

    // Support json api page[offset]/page[limit] spec
    params.page = {};
    params.page.limit = params.limit;
    delete params.limit;
    params.page.offset = params.offset;
    delete params.offset;

    return params;
  },

  /**
  * Transform params related to filtering into API expected format.
  * Follows json:api spec by default: http://jsonapi.org/recommendations/#filtering.
  * &#x60;?filter[lastName]&#x60; =&gt; &#x60;?filter[last-name]&#x60;.
  *
  * @method serializeFilter
  * @param params {Object} An object of query parameters.
  * @return params {Object} The serialized filter query parameters.
  */
  serializeFilter(params) {
    // serialize filter query params
    const filter = params.filter;

    for (let key in filter) {
      if (filter.hasOwnProperty(key)) {
        const value = filter[key];
        const serializedKey = this.serializeProperty(key);

        // delete unserialized key
        delete filter[key];

        key = serializedKey;
        filter[key] = value;
      }
    }

    return params;
  },

  /**
  * Transform params related to sorting into API expected format.
  * Follows json:api spec by default: http://jsonapi.org/format/#fetching-sorting.
  * &#x60;?sort=lastName&#x60; =&gt; &#x60;?sort=last-name&#x60;.
  *
  * @method serializeSort
  * @param params {Object} An object of query parameters.
  * @return params {Object} The serialized sort query parameters.
  */
  serializeSort(params) {
    params.sort = this.serializeProperty(params.sort);

    return params;
  },

  /**
  * Follows json:api dasherized naming.
  * &#x60;lastName&#x60; =&gt; &#x60;last-name&#x60;.
  *
  * If you are not supporting json:api&#x27;s dasherized properties this can be extended to support other conventions:
  &#x60;&#x60;&#x60;js
  import EmberTabular from &#x27;ember-tabular/components/ember-tabular&#x27;;

  export default EmberTabular.extend({
    serializeProperty(property) {
      // Override to convert all properties sent in requests to camelize instead of the default dasherized
      // ?filter[lastName]&amp;sort=isAdmin
      // (pseudo code)
      if (property) {
        return Ember.String.camelize(property);
      }

      return null;
    },
  });
  &#x60;&#x60;&#x60;
  *
  * @method serializeProperty
  * @param property {String}
  * @return property {String}
  */
  serializeProperty(property) {
    if (property) {
      return Ember.String.dasherize(property);
    }

    return null;
  },

  /**
  * Used to normalize query parameters returned from &#x60;request&#x60; to components expected format.
  *
  * @method normalize
  * @param data {Object} Data object returned from request.
  * @param params {Object} The returned object of query parameters.
  * @return data {Object}
  */
  normalize(data, params) {
    // Normalize Pagination
    data = this.normalizePagination(data, params);
    // Normalize Filter
    data.query = this.normalizeFilter(data.query);
    // Normalize Sort
    data.query = this.normalizeSort(data.query);

    return data;
  },

  /**
  * Used to normalize pagination related query parameters returned from &#x60;request&#x60; to components expected format.
  * &#x60;?page[offset]&#x60; =&gt; &#x60;offset&#x60;.
  * &#x60;?page[limit]&#x60; =&gt; &#x60;limit&#x60;.
  *
  * @method normalizePagination
  * @param data {Object} Data object returned from request.
  * @param params {Object} The returned object of query parameters.
  * @return data {Object}
  */
  normalizePagination(data, params) {
    // pagination - return number of pages
    const pageLimit = Math.ceil(data.meta.total / params.page.limit);
    // determine if pageLimit is a valid number value
    if (isFinite(pageLimit)) {
      this.set(&#x27;pageLimit&#x27;, pageLimit);
    } else {
      this.set(&#x27;pageLimit&#x27;, null);
    }

    return data;
  },

  /**
  * Used to normalize filter related query parameters returned from &#x60;request&#x60; to components expected format.
  * &#x60;?filter[last-name]&#x60; =&gt; &#x60;filter[lastName]&#x60;.
  * &#x60;?filter[user.first-name]&#x60; =&gt; &#x60;filter[user.firstName]&#x60;.
  *
  * @method normalizeFilter
  * @param query {Object} The returned object of query parameters.
  * @return query {Object}
  */
  normalizeFilter(query) {
    // normalize filter[property-key]
    // into filter[propertyKey]
    let filter = query.filter;
    for (let key in filter) {
      if (filter.hasOwnProperty(key)) {
        const value = filter[key];
        const propertySegments = this.segmentProperty(key);
        let normalizedKey;

        // handle/retain dot notation relationships &#x60;property.propertyName&#x60;
        propertySegments.forEach(function(el, i, normalizedSegments) {
          normalizedSegments[i] = this.normalizeProperty(propertySegments[i]);
        }.bind(this));

        // join segments to create normalizedProperty
        normalizedKey = propertySegments.join(&#x27;.&#x27;);

        // delete unserialized key
        delete filter[key];

        key = normalizedKey;
        filter[key] = value;
      }
    }

    return query;
  },

  /**
  * Used to normalize sort related query parameters returned from &#x60;request&#x60; to components expected format.
  * Expects json:api by default.
  *
  * @method normalizeSort
  * @param query {Object} The returned object of query parameters.
  * @return query {Object}
  */
  normalizeSort(query) {
    return query;
  },

  /**
  * Used to normalize properties to components expected format.
  * By default this will camelize the property.
  *
  * @method normalizeProperty
  * @param property {String}
  * @return property {String}
  */
  normalizeProperty(property) {
    if (property) {
      return Ember.String.camelize(property);
    }

    return null;
  },

  /**
  * @method segmentProperty
  * @param property {String}
  * @return segments {Array}
  */
  segmentProperty(property) {
    let segments = property.split(&#x27;.&#x27;);

    return segments;
  },

  /**
  * Determine if &#x60;record&#x60; is loaded using a number of different property checks.
  *
  * @property isrecordLoaded
  * @type Function
  */
  isrecordLoaded: Ember.computed(&#x27;errors&#x27;, &#x27;record&#x27;, &#x27;record.isFulfilled&#x27;, &#x27;record.isLoaded&#x27;,
  &#x27;modelName&#x27;, function () {
    // If record array isLoaded but empty
    if (this.get(&#x27;record.isLoaded&#x27;)) {
      return true;
    }
    // If record.content array loaded is empty
    if (this.get(&#x27;record.isFulfilled&#x27;)) {
      return true;
    }
    // If errors
    if (this.get(&#x27;errors&#x27;)) {
      return true;
    }
    // If record array is empty
    if (this.get(&#x27;record&#x27;) &amp;&amp; this.get(&#x27;record&#x27;).length === 0) {
      return true;
    }
    // Show custom tableLoadedMessage
    if (this.get(&#x27;record&#x27;) === null &amp;&amp; this.get(&#x27;modelName&#x27;) === null) {
      return true;
    }

    return false;
  }),

  /**
  * Used in templates to determine if table header will allow filtering.
  *
  * @property isColumnFilters
  * @type Boolean
  * @return {Boolean}
  * @default false
  */
  isColumnFilters: Ember.computed(&#x27;columns&#x27;, function () {
    const columns = this.get(&#x27;columns&#x27;);

    for (let i = columns.length - 1; i &gt;= 0; i--) {
      if (columns[i].hasOwnProperty(&#x27;property&#x27;)) {
        return true;
      }
    }

    return false;
  }),

  /**
  * Runs on init to setup the table header default columns.
  *
  * @method setColumnDefaults
  */
  setColumnDefaults: Ember.on(&#x27;init&#x27;, function () {
    this.get(&#x27;columns&#x27;).map(function (column) {
      // if column does not have a sort property defined set to true
      if (!column.hasOwnProperty(&#x27;sort&#x27;)) {
        Ember.set(column, &#x27;sort&#x27;, true);
      }
      // if column does not have a type property defined set to text
      if (!column.hasOwnProperty(&#x27;type&#x27;)) {
        Ember.set(column, &#x27;type&#x27;, &#x27;text&#x27;);
      }
    });
  }),

  /**
  * Runs on init to set the default sort param.
  *
  * @method defaultSort
  */
  defaultSort: Ember.on(&#x27;init&#x27;, function () {
    this.get(&#x27;columns&#x27;).map(function (el) {
      if (el.hasOwnProperty(&#x27;defaultSort&#x27;)) {
        this.set(&#x27;sort&#x27;, el.defaultSort);
      }
    }.bind(this));
  }),

  /**
  * Constructs the query object to be used in &#x60;request&#x60;.
  *
  * @property query
  * @type Object
  * @return {Object}
  */
  query: Ember.computed(&#x27;page&#x27;, &#x27;limit&#x27;, &#x27;offset&#x27;, &#x27;sort&#x27;, &#x27;filter.@each.value&#x27;,
  &#x27;staticParams&#x27;, function () {
    let query = {};
    const filter = this.get(&#x27;filter&#x27;) || [];
    query = {
      page: this.get(&#x27;page&#x27;),
      limit: this.get(&#x27;limit&#x27;),
      offset: this.get(&#x27;offset&#x27;),
      sort: this.get(&#x27;sort&#x27;),
      filter: filter.reduce((memo, filter) =&gt; Ember.merge(memo, {
        [filter.field]: filter.value,
      }), {}),
    };

    // Merge staticParams/query into query
    Ember.merge(query, this.get(&#x27;staticParams&#x27;));

    return query;
  }),

  /**
  * Make request to API for data.
  *
  * @method request
  * @param params {Object} Serialized query parameters.
  * @param modelName {String}
  */
  request(params, modelName) {
    params = this.serialize(params);

    return this.get(&#x27;store&#x27;).query(modelName, params).then(
      function (data) {
        if (!this.isDestroyed || !this.isDestroying) {
          data = this.normalize(data, params);
          this.set(&#x27;isLoading&#x27;, false);
          this.set(&#x27;record&#x27;, data);
        }
      }.bind(this),
      function (errors) {
        if (!this.isDestroyed || !this.isDestroying) {
          this.failure(errors);
        }
      }.bind(this)
    );
  },

  /**
  * Sets the &#x60;record&#x60; after the &#x60;request&#x60; is resolved.
  *
  * @method setModel
  */
  setModel: Ember.on(&#x27;init&#x27;, Ember.observer(&#x27;query&#x27;, &#x27;makeRequest&#x27;, function () {
    Ember.run.once(this, function () {
      // If makeRequest is false do not make request and setModel
      if (this.get(&#x27;makeRequest&#x27;)) {
        this.reset();
        this.set(&#x27;isLoading&#x27;, true);
        const modelName = this.get(&#x27;modelName&#x27;);
        const params = this.get(&#x27;query&#x27;);

        return this.request(params, modelName);
      }
    });
  })),

  actions: {
    sortBy(property) {
      this.setSort(property);
      this.updateSortUI(property);
    },
    toggleFilterRow() {
      this.toggleProperty(&#x27;showFilterRow&#x27;);
    },
  },

  /**
  * Sets the active sort property.
  *
  * @method setSort
  * @param sortProperty {String}
  */
  setSort: Ember.on(&#x27;didInsertElement&#x27;, function (sortProperty) {
    if (this.get(&#x27;sort&#x27;) || sortProperty) {
      let property;

      if (sortProperty) {
        property = sortProperty;
      } else {
        property = this.get(&#x27;sort&#x27;).replace(/^-/, &#x27;&#x27;);
        // Must be the opposite of property
        sortProperty = &#x60;-${property}&#x60;;
      }

      property = property;

      if (this.get(&#x27;sort&#x27;) === sortProperty) {
        this.set(&#x27;sort&#x27;, &#x60;-${property}&#x60;);
      } else {
        this.set(&#x27;sort&#x27;, property);
      }
    }
  }),

  /**
  * Sets the proper classes on table headers when sorting.
  *
  * @method updateSortUI
  * @param sortProperty {String}
  */
  updateSortUI: Ember.on(&#x27;didInsertElement&#x27;, function (sortProperty) {
    if (this.get(&#x27;sort&#x27;) || sortProperty) {
      const _this = this;
      const $table = this.$();
      const sort = this.get(&#x27;sort&#x27;);
      let property,
        classProperty,
        $tableHeader;

      // convert property to camelCase
      property = sort.replace(/^-/, &#x27;&#x27;);
      // convert relationships
      classProperty = property.replace(/\./g, &#x27;-&#x27;);
      $tableHeader = Ember.$(&#x60;#${classProperty}&#x60;);

      // Remove all classes on th.sortable but sortable class
      $table.find(&#x27;th&#x27;).removeClass(function (i, group) {
        const list = group.split(&#x27; &#x27;);
        return list.filter(function (val) {
          return (val !== _this.get(&#x27;sortableClass&#x27;) &amp;&amp; val !== &#x27;filterable&#x27;);
        }).join(&#x27; &#x27;);
      });

      if (sort.charAt(0) === &#x27;-&#x27;) {
        $tableHeader.addClass(&#x27;sort-desc&#x27;);
      } else {
        $tableHeader.addClass(&#x27;sort-asc&#x27;);
      }
    }
  }),

  /**
  * @method failure
  * @param response {Object}
  */
  failure(response) {
    this.reset();
    this.setProperties({
      isFailure: true,
      pageLimit: null,
    });

    // Set per field errors if found
    if (&#x27;errors&#x27; in response) {
      this.set(&#x27;errors&#x27;, response.errors);
    }
  },

  /**
  * Resets all state specific properties.
  *
  * @method reset
  */
  reset() {
    this.setProperties({
      isLoading: false,
      errors: null,
      isSuccess: false,
      isFailure: false,
      successMessage: this.get(&#x27;defaultSuccessMessage&#x27;),
      failureMessage: this.get(&#x27;defaultFailureMessage&#x27;),
    });
  },
});

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/jquery/jquery-1.8.2.min.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.js"></script>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script src="../assets/js/yuidoc-bootstrap.js"></script>
<script>prettyPrint();</script>
</body>
</html>
